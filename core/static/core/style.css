/* ---------- Base + theme variables ---------- */

body {
    margin: 0;
    font-family: "Poppins", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    transition: background 0.4s ease, color 0.4s ease;
}

/* Light (warm trip) theme */
body.light-theme {
    --bg-main: radial-gradient(circle at top, #ffe6d9 0%, #f5f7fa 40%, #e4ecf7 100%);
    --text-color: #111827;

    --navbar-bg: linear-gradient(90deg, #ff7f50, #ff6b6b);
    --navbar-text: #ffffff;

    --primary: #ff7f50;
    --primary-hover: #ff6b6b;
    --outline-light-border: #ffffff;

    --card-bg: #ffffff;
    --card-border: rgba(148, 163, 184, 0.4);
    --card-shadow: 0 10px 25px rgba(15, 23, 42, 0.08);

    --table-header-bg: #f3f4f6;
    --table-row-alt: #f9fafb;

    --badge-pos-bg: #d1fae5;
    --badge-pos-text: #065f46;
    --badge-neg-bg: #fee2e2;
    --badge-neg-text: #991b1b;
    --badge-zero-bg: #e0f2fe;
    --badge-zero-text: #075985;

    --list-bg: #ffffff;
    --list-border: #e5e7eb;

    --input-bg: #ffffff;
    --input-border: #d1d5db;
    --input-text: #111827;
}

/* Dark night-travel theme */
body.dark-theme {
    --bg-main: radial-gradient(circle at top, #1f2937 0%, #020617 60%, #000000 100%);
    --text-color: #e5e7eb;

    --navbar-bg: rgba(15, 23, 42, 0.98);
    --navbar-text: #e5e7eb;

    --primary: #fb7185;          /* warm pink */
    --primary-hover: #f97316;    /* warm orange */
    --outline-light-border: #e5e7eb;

    --card-bg: rgba(15, 23, 42, 0.9);
    --card-border: rgba(148, 163, 184, 0.5);
    --card-shadow: 0 18px 45px rgba(15, 23, 42, 0.9);

    --table-header-bg: rgba(30, 64, 175, 0.5);
    --table-row-alt: rgba(15, 23, 42, 0.85);

    --badge-pos-bg: #064e3b;
    --badge-pos-text: #bbf7d0;
    --badge-neg-bg: #7f1d1d;
    --badge-neg-text: #fee2e2;
    --badge-zero-bg: #0f766e;
    --badge-zero-text: #e0f2fe;

    --list-bg: rgba(15, 23, 42, 0.9);
    --list-border: rgba(55, 65, 81, 0.9);

    --input-bg: rgba(15, 23, 42, 0.9);
    --input-border: rgba(75, 85, 99, 0.9);
    --input-text: #e5e7eb;
}

/* Apply theme variables */
body {
    background: var(--bg-main);
    color: var(--text-color);
}

/* ---------- Layout + cards ---------- */

.main-container {
    padding-top: 2rem;
    padding-bottom: 2rem;
}

.card-custom {
    background: var(--card-bg);
    border-radius: 0.75rem;
    padding: 1.5rem;
    border: 1px solid var(--card-border);
    box-shadow: var(--card-shadow);
    margin-bottom: 1.5rem;
}

.form-card {
    background: var(--card-bg);
    border-radius: 0.75rem;
    padding: 1.5rem;
    border: 1px solid var(--card-border);
    box-shadow: var(--card-shadow);
    max-width: 600px;
    margin: 0 auto 2rem auto;
}

.table-custom {
    background: var(--card-bg);
    border-radius: 0.75rem;
    border: 1px solid var(--card-border);
    box-shadow: var(--card-shadow);
    overflow: hidden;
    margin-bottom: 1.5rem;
}

.table-custom table {
    margin-bottom: 0;
}

.page-title {
    margin-bottom: 1rem;
}

/* ---------- Navbar + buttons ---------- */

.navbar {
    background: var(--navbar-bg) !important;
    color: var(--navbar-text);
}

.navbar .navbar-brand,
.navbar .nav-link,
.navbar .navbar-text {
    color: var(--navbar-text) !important;
}

.navbar .nav-link.active,
.navbar .nav-link:focus,
.navbar .nav-link:hover {
    opacity: 0.85;
}

.btn-primary {
    background-color: var(--primary);
    border-color: var(--primary);
    border-radius: 999px;
}

.btn-primary:hover {
    background-color: var(--primary-hover);
    border-color: var(--primary-hover);
}

.btn-outline-light {
    border-color: var(--outline-light-border);
}

/* ---------- Tables ---------- */

.table {
    color: inherit;
}

.table thead.table-light > tr > th {
    background-color: var(--table-header-bg);
    color: inherit;
    border-color: var(--card-border);
}

.table-striped > tbody > tr:nth-of-type(odd) > * {
    background-color: var(--table-row-alt);
}

.table-striped > tbody > tr:nth-of-type(even) > * {
    background-color: transparent;
}

.table > :not(caption) > * > * {
    border-color: var(--card-border);
}

/* ---------- Badges for balances ---------- */

.badge-balance-positive {
    background-color: var(--badge-pos-bg);
    color: var(--badge-pos-text);
}

.badge-balance-negative {
    background-color: var(--badge-neg-bg);
    color: var(--badge-neg-text);
}

.badge-balance-zero {
    background-color: var(--badge-zero-bg);
    color: var(--badge-zero-text);
}

/* ---------- List groups ---------- */

.list-group-item {
    background-color: var(--list-bg);
    color: var(--text-color);
    border-color: var(--list-border);
    transition: background-color 0.2s ease, transform 0.1s ease;
}

.list-group-item-action:hover,
.list-group-item-action:focus {
    background-color: rgba(249, 250, 251, 0.4);
    transform: translateY(-1px);
}

body.dark-theme .list-group-item-action:hover,
body.dark-theme .list-group-item-action:focus {
    background-color: rgba(55, 65, 81, 0.8);
}

/* ---------- Forms ---------- */

.form-control,
.form-select,
textarea,
input[type="text"],
input[type="number"],
input[type="password"],
input[type="email"],
input[type="date"] {
    background-color: var(--input-bg);
    color: var(--input-text);
    border-color: var(--input-border);
}

.form-control:focus,
.form-select:focus,
textarea:focus,
input[type="text"]:focus,
input[type="number"]:focus,
input[type="password"]:focus,
input[type="email"]:focus,
input[type="date"]:focus {
    box-shadow: 0 0 0 0.2rem rgba(248, 113, 113, 0.25); /* subtle coral */
    border-color: var(--primary);
    outline: none;
}

.form-control::placeholder {
    color: rgba(156, 163, 175, 0.9);
}

/* Django default table + label alignment a bit nicer in forms rendered as_table */
table.table td, table.table th {
    vertical-align: middle;
}

/* ---------- Fix text colors in both themes ---------- */

/* Make sure normal text uses the theme color everywhere */
.card-custom,
.form-card,
.table-custom,
.table,
.list-group-item {
    color: var(--text-color);
}

/* Labels in forms */
label,
.form-label {
    color: var(--text-color);
}

/* Links: use primary color, but still readable on dark */
a {
    color: var(--primary);
    text-decoration: none;
}
a:hover {
    text-decoration: underline;
}

body.dark-theme a {
    color: #fbbf24; /* warm yellow-ish, readable on dark */
}

/* Muted text should also adapt to theme */
.text-muted,
.text-body-secondary {
    color: rgba(107, 114, 128, 0.9) !important;  /* grey for light */
}

body.dark-theme .text-muted,
body.dark-theme .text-body-secondary {
    color: rgba(209, 213, 219, 0.9) !important;  /* light grey for dark */
}

/* ---------- Extra dark-theme fixes for text ---------- */

/* Table text: force theme color in dark mode */
body.dark-theme .table td,
body.dark-theme .table th {
    color: var(--text-color);
}

/* Generic badges in dark mode (but keep our balance badges custom) */
body.dark-theme .badge:not(.badge-balance-positive):not(.badge-balance-negative):not(.badge-balance-zero) {
    background-color: var(--card-bg);
    color: var(--text-color);
    border: 1px solid var(--card-border);
}
